# [BluePayRingAndroidDoc](https://sdkpay.github.io/BluePayRingAndroidDoc/)

#### [Сущности и классы](https://sdkpay.github.io/BluePayRingAndroidDoc/classes) | [Работа с SDK](https://sdkpay.github.io/BluePayRingAndroidDoc/usage) | [Актуальная версия SDK](https://sdkpay.github.io/BluePayRingAndroidDoc/version) | [Используемые зависимости](https://sdkpay.github.io/BluePayRingAndroidDoc/dependencies)

<br>

# Классы в SDK

### RingClientSdk

Класс, через который происходит всё взаимодействие с SDK

Открытые методы класса:

* **getTokens(config: RingSdkConfig.Default)** <br> - Метод для инициализации SDK и запроса
  платежных токенов

* **getTokensForCard(config: RingSdkConfig.ForCard)** <br> - Метод для инициализации SDK и запроса
  платежных
  токенов по sub картыб полученному ранее через метод getTokens

* **cancelGettingTokensForCard()** <br> - Метод для отмены/остановки запроса платежных токенов по
  sub карты и возврата из SDK в случае, если SDK по какой-то причине не возвращает результат

* **logout(context: Context)** <br> - Производит деавторизацию пользователя в SDK

### RingSdkConfig.Default

Класс-конфигуратор. Содержит необходимые настройки SDK для осуществления запроса
платежных токенов с участием пользователя.

Поля класса:

| Наименование    | Тип               | Описание                                                                            |
|-----------------|-------------------|-------------------------------------------------------------------------------------|
| context         | Context           | контекст мерчанта, нужен для инициализации SDK                                      |
| apiKey          | String            | api key, необходимый для идентификации партнера                                     |
| appPackageName  | String            | package-имя приложения мерчанта, необходимый для авторизации через приложение банка |
| applicationName | String            | наименование приложения                                                             |
| typeface        | SdkTypeface       | шрифты мерчанта, используемые в SDK                                                 |
| callBack        | GetTokensCallback | callback с результатом получения платежных токенов                                  |

### RingSdkConfig.ForCard

Класс-конфигуратор. Содержит необходимые настройки SDK для осуществления запроса
платежных токенов для заданной через sub карты.

Поля класса:

| Наименование    | Тип               | Описание                                                                                                                                       |
|-----------------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| context         | Context           | контекст мерчанта, нужен для инициализации SDK                                                                                                 |
| apiKey          | String            | api key, необходимый для идентификации партнера                                                                                                |
| appPackageName  | String            | package-имя приложения мерчанта, необходимый для авторизации через приложение банка                                                            |
| applicationName | String            | наименование приложения                                                                                                                        |
| sub             | String            | уникальный идентификатор группы платежных токенов, который нужно передать в случае, когда запрашиваются платежные токены выбранной ранее карты |
| callBack        | GetTokensCallback | callback с результатом получения платежных токенов                                                                                             |

### SdkTypeface

Класс шрифтов, которые используется в SDK

Поля класса:

- main: Typeface - основной шрифт (sans_text)
- semibold: Typeface - полужирный шрифт (sans_display_semibold)

### GetTokensCallback

Callback метода оплаты.

Код класса:

```kotlin
typealias GetTokensCallback = (GetTokensResult) -> Unit
```

### GetTokensResult

Класс результата получения списка токенов от SDK

Поля класс:

| Наименование   | Тип            | Описание                                                      |
|----------------|----------------|---------------------------------------------------------------|
| state          | GetTokensState | Статус получения списка токенов                               |
| errorState     | ErrorState     | Информация об ошибке                                          |
| localSessionId | String         | Идентификатор локальной сессии                                |
| paymentTool    | PaymentTool    | Структура с информацией о выбранной клиентом платежной сессии |

### GetTokensState

enum класс возможных статусов получения списка токенов

Состояния:

| Состояние | Описание                                |
|-----------|-----------------------------------------|
| SUCCESS   | Список токенов успешно получен          |
| ERROR     | Во время получения произошла ошибка     |
| CANCEL    | Пользователь самостоятельно покинул SDK |

### ErrorState

enum класс возможных ошибок, полученных от SDK

Виды ошибок:

| Ошибка                  | Описание                                                                                                                                                                                           |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| INTERNAL_ERROR          | Любая неклассифицированная ошибка sdk. <br>Например, <br>- ошибка инициализации SDK; <br>- устройство не соответствует требованиям для проведения оплаты; <br>- ошибка парсинга ответов от сервера |
| BANK_APPLICATION_ABSENT | Отсутствует приложение банка (у пользователя не установлен СБОЛ на устройстве)                                                                                                                     |
| AUTHORIZATION           | Ошибка авторизации (пользователь не смог авторизоваться в приложении банка)                                                                                                                        |
| UNAUTHORIZED            | Пользователь не авторизован (ранее не был авторизован или требуется повторная авторизация). Требуется повторная аворизация через СБОЛ.                                                             |
| INVALID_CARD            | Карта больше не действительна. Карта пользователя, ранее выбранная для использования, больше не активна. Требуется повторный выбор карт из списка.                                                 |
| NO_CARDS                | У пользователя нет активных карт.                                                                                                                                                                  |
| CONNECTION_FAILED       | Нет соединения с сервером. <br>  Возможные кейсы возникновения: <br> - таймаут запроса; <br> - не смогли подключиться к серверу; <br> - нет интернета.                                             |
| SYSTEM                  | Системная ошибка от сервера на одном из сервисов.                                                                                                                                                  |
| INCORRECT_PARAMS        | Параметры запроса не прошли валидацию.                                                                                                                                                             |

### PaymentTool

Класс для хранения информации о выбранной клиентом платежной сессии

Поля класса:

| Наименование  | Тип    | Описание                                          |
|---------------|--------|---------------------------------------------------|
| productName   | String | Наименование платежной карты                      |
| cardNumber    | String | Последние 4 цифры номера карты                    |
| sub           | String | Уникальный идентификатор группы платежных токенов |
| logoUrl       | String | Иконка карты (ссылка)                             |
| paymentTokens | String | Список платежных токенов для выбранной карты      |